/* Study Session Animations */

/* Floating XP Animation - floats toward top-right (XP indicator) */
@keyframes float-xp {
  0% {
    opacity: 1;
    transform: translate(0, 0) scale(1);
  }
  20% {
    opacity: 1;
    transform: translate(10px, -20px) scale(1.2);
  }
  100% {
    opacity: 0;
    transform: translate(120px, -200px) scale(0.5);
  }
}

.animate-float-xp {
  animation: float-xp 2.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Pop In Animation */
@keyframes pop-in {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-pop-in {
  animation: pop-in 0.3s ease-out;
}

/* Level Up Animation */
@keyframes level-up {
  0% {
    opacity: 0;
    transform: scale(0.5) rotate(-10deg);
  }
  50% {
    transform: scale(1.1) rotate(5deg);
  }
  100% {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}

.animate-level-up {
  animation: level-up 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Fade In Animation */
@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.animate-fade-in {
  animation: fade-in 0.3s ease-in;
}

/* Scale Up Animation */
@keyframes scale-up {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-scale-up {
  animation: scale-up 0.3s ease-out;
}

/* Slide Up Animation */
@keyframes slide-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-slide-up {
  animation: slide-up 0.4s ease-out;
}

/* Pulse Green Animation (for correct answer button) */
@keyframes pulse-green {
  0%,
  100% {
    box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
  }
  50% {
    box-shadow: 0 0 0 10px rgba(34, 197, 94, 0);
  }
}

.animate-pulse-green {
  animation: pulse-green 1.5s ease-in-out infinite;
}

/* Active Scale Effect */
.active\:scale-95:active {
  transform: scale(0.95);
}

.active\:scale-98:active {
  transform: scale(0.98);
}

/* Bounce Animation */
@keyframes bounce {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.animate-bounce {
  animation: bounce 0.6s ease-in-out infinite;
}

/* Transform Style for 3D flip cards */
.transform-style-3d {
  transform-style: preserve-3d;
}

.backface-hidden {
  backface-visibility: hidden;
}

/* 3D Card Flip Animation */
.card-flip-container {
  perspective: 1000px;
}

.card-flip-inner {
  position: relative;
  width: 100%;
  transition: transform 0.6s;
  transform-style: preserve-3d;
}

.card-flip-inner.flipped {
  transform: rotateY(180deg);
}

.card-flip-front,
.card-flip-back {
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

.card-flip-back {
  transform: rotateY(180deg);
}

/* Confetti particle animations for achievement celebrations */
@keyframes confetti-fall {
  0% {
    transform: translateY(-20vh) rotate(0deg);
    opacity: 1;
  }
  80% {
    opacity: 1;
  }
  100% {
    transform: translateY(110vh) rotate(720deg);
    opacity: 0;
  }
}

@keyframes confetti-shake {
  0%,
  100% {
    margin-left: 0;
  }
  25% {
    margin-left: 20px;
  }
  75% {
    margin-left: -20px;
  }
}

.confetti-particle {
  position: fixed;
  top: -10px;
  animation:
    confetti-fall var(--fall-duration, 3s) linear forwards,
    confetti-shake var(--shake-duration, 1.5s) ease-in-out infinite;
  pointer-events: none;
  z-index: 9999;
}

/* ===== NEW GAMIFICATION EFFECTS ===== */

/* Screen Shake - Light */
@keyframes shake-light {
  0%,
  100% {
    transform: translate(0, 0);
  }
  15% {
    transform: translate(-2px, 0);
  }
  30% {
    transform: translate(2px, -1px);
  }
  45% {
    transform: translate(-1px, 1px);
  }
  60% {
    transform: translate(1px, -1px);
  }
  75% {
    transform: translate(-1px, 0);
  }
}

/* Screen Shake - Medium */
@keyframes shake-medium {
  0%,
  100% {
    transform: translate(0, 0);
  }
  10% {
    transform: translate(-4px, 0);
  }
  20% {
    transform: translate(3px, -2px);
  }
  30% {
    transform: translate(-2px, 3px);
  }
  40% {
    transform: translate(4px, -1px);
  }
  50% {
    transform: translate(-3px, 2px);
  }
  60% {
    transform: translate(2px, -2px);
  }
  70% {
    transform: translate(-1px, 1px);
  }
  80% {
    transform: translate(1px, 0);
  }
}

/* Screen Shake - Heavy */
@keyframes shake-heavy {
  0%,
  100% {
    transform: translate(0, 0);
  }
  8% {
    transform: translate(-6px, 0);
  }
  16% {
    transform: translate(5px, -3px);
  }
  24% {
    transform: translate(-4px, 5px);
  }
  32% {
    transform: translate(6px, -2px);
  }
  40% {
    transform: translate(-5px, 4px);
  }
  48% {
    transform: translate(3px, -4px);
  }
  56% {
    transform: translate(-2px, 3px);
  }
  64% {
    transform: translate(4px, -1px);
  }
  72% {
    transform: translate(-3px, 2px);
  }
  80% {
    transform: translate(1px, -1px);
  }
}

.animate-shake-light {
  animation: shake-light 0.3s ease-in-out;
}

.animate-shake-medium {
  animation: shake-medium 0.4s ease-in-out;
}

.animate-shake-heavy {
  animation: shake-heavy 0.5s ease-in-out;
}

/* Fire Glow Effect for Streak Indicator */
@keyframes fire-glow {
  0%,
  100% {
    text-shadow:
      0 0 4px rgba(255, 160, 0, 0.6),
      0 0 8px rgba(255, 80, 0, 0.3);
    filter: brightness(1);
  }
  50% {
    text-shadow:
      0 0 8px rgba(255, 160, 0, 0.9),
      0 0 16px rgba(255, 80, 0, 0.6),
      0 0 24px rgba(255, 0, 0, 0.3);
    filter: brightness(1.15);
  }
}

@keyframes fire-glow-intense {
  0%,
  100% {
    text-shadow:
      0 0 6px rgba(255, 100, 0, 0.8),
      0 0 12px rgba(255, 50, 0, 0.5),
      0 0 20px rgba(255, 0, 0, 0.3);
    filter: brightness(1.1);
  }
  50% {
    text-shadow:
      0 0 10px rgba(255, 100, 0, 1),
      0 0 20px rgba(255, 50, 0, 0.8),
      0 0 30px rgba(255, 0, 0, 0.5),
      0 0 40px rgba(200, 0, 0, 0.2);
    filter: brightness(1.25);
  }
}

.animate-fire-glow {
  animation: fire-glow 1.5s ease-in-out infinite;
}

.animate-fire-glow-intense {
  animation: fire-glow-intense 1s ease-in-out infinite;
}

/* Sparkle Particle Animation */
@keyframes sparkle-burst {
  0% {
    opacity: 1;
    transform: translate(0, 0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(var(--sparkle-x, 50px), var(--sparkle-y, -50px)) scale(0);
  }
}

.sparkle-particle {
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
  animation: sparkle-burst 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  animation-delay: var(--sparkle-delay, 0ms);
}

/* Firework burst for session completion */
@keyframes firework-rise {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  50% {
    opacity: 1;
    transform: translateY(-80px) scale(1.2);
  }
  100% {
    opacity: 0;
    transform: translateY(-120px) scale(0.2);
  }
}

@keyframes firework-particle {
  0% {
    opacity: 1;
    transform: translate(0, 0) scale(1);
  }
  70% {
    opacity: 0.8;
  }
  100% {
    opacity: 0;
    transform: translate(var(--fw-x, 40px), var(--fw-y, -40px)) scale(0.3);
  }
}

.firework-particle {
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
  animation: firework-particle 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  animation-delay: var(--fw-delay, 0ms);
}

/* Count-up animation for stat numbers */
@keyframes count-up-pop {
  0% {
    transform: scale(0.5);
    opacity: 0;
  }
  60% {
    transform: scale(1.15);
    opacity: 1;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.animate-count-up {
  animation: count-up-pop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Pulse ring for streak milestones */
@keyframes pulse-ring {
  0% {
    transform: scale(1);
    opacity: 0.6;
  }
  100% {
    transform: scale(2);
    opacity: 0;
  }
}

.streak-pulse-ring {
  position: absolute;
  inset: -4px;
  border-radius: 50%;
  border: 2px solid currentColor;
  animation: pulse-ring 1s ease-out infinite;
  pointer-events: none;
}

/* Correct answer flash on card area */
@keyframes correct-flash {
  0% {
    box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.6);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(34, 197, 94, 0.2);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
  }
}

@keyframes incorrect-flash {
  0% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.6);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(239, 68, 68, 0.2);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
  }
}

.animate-correct-flash {
  animation: correct-flash 0.5s ease-out;
}

.animate-incorrect-flash {
  animation: incorrect-flash 0.5s ease-out;
}
