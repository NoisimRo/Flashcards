/* ============================================
   FLASHCARDS THEME SYSTEM
   Dual-layer: Base Mode (light/night) + Accent Theme (violet/gold/silver)

   SCALABILITY:
   - To add a new base mode: copy .theme-night and change the variable values
   - To add a new accent: copy .accent-violet and change the 4 accent variables
   ============================================ */

/* ============================================
   BADGE TIER COLORS
   Customizable via admin settings.
   Set on :root so they work in both light/night modes
   and can be overridden at runtime via JavaScript.
   ============================================ */
:root {
  --badge-tier-bronze: #cd7f32;
  --badge-tier-silver: #c0c0c0;
  --badge-tier-gold: #ffd700;
  --badge-tier-platinum: #9b59b6;
}

/* ============================================
   LAYER 1: BASE MODES
   Controls: backgrounds, surfaces, text, borders, overlays
   ============================================ */

/* --- LIGHT MODE (default) --- */
.theme-light {
  /* Backgrounds */
  --bg-primary: #fdfbf7;
  --bg-secondary: #f8f6f1;
  --bg-tertiary: #efece5;
  --bg-surface: #ffffff;
  --bg-surface-hover: #f9fafb;
  --bg-elevated: #ffffff;

  /* Text */
  --text-primary: #111827;
  --text-secondary: #374151;
  --text-tertiary: #6b7280;
  --text-muted: #9ca3af;
  --text-inverse: #ffffff;

  /* Borders */
  --border-primary: #e5e0d5;
  --border-secondary: #e5e7eb;
  --border-subtle: #f3f4f6;

  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);

  /* Overlay */
  --overlay-bg: rgba(0, 0, 0, 0.5);
  --overlay-backdrop: blur(4px);

  /* Inputs */
  --input-bg: #ffffff;
  --input-border: #d1d5db;
  --input-focus-ring: var(--color-accent);

  /* Scrollbar */
  --scrollbar-track: transparent;
  --scrollbar-thumb: #d1d5db;
  --scrollbar-thumb-hover: #9ca3af;

  /* Sidebar */
  --sidebar-bg: #f8f6f1;
  --sidebar-border: #e5e0d5;
  --sidebar-item-active-bg: #ffffff;
  --sidebar-item-hover-bg: #efece5;

  /* Cards / Tiles */
  --card-bg: #ffffff;
  --card-border: #e5e7eb;
  --card-hover-shadow: var(--shadow-lg);

  /* Dashboard gradients */
  --dashboard-bg: linear-gradient(to bottom right, #eef2ff, #ffffff, #faf5ff);
  --dashboard-stat-bg: linear-gradient(to bottom right, #f0f9ff, #eef2ff);

  /* Specific component tokens */
  --completion-modal-bg: #ffffff;
  --completion-modal-perfect-bg: linear-gradient(to bottom right, #fefce8, #fef3c7, #fef9c3);
  --completion-modal-perfect-border: #facc15;
  --completion-modal-perfect-banner-bg: linear-gradient(to right, #fef9c3, #fde68a);
  --completion-modal-perfect-banner-border: #fde047;
  --completion-modal-perfect-text: #713f12;
  --completion-modal-xp-text: #ca8a04;
  --completion-modal-xp-label: #a16207;
  --tag-bar-bg: #f9fafb;

  /* Study card faces */
  --study-card-front-bg: #ffffff;
  --study-card-back-bg: linear-gradient(to bottom right, #eef2ff, #faf5ff);
  --study-card-footer-bg: rgba(255, 255, 255, 0.9);
  --study-card-back-footer-bg: rgba(238, 242, 255, 0.9);
  --study-card-back-footer-border: #c7d2fe;

  /* Quiz/option feedback */
  --option-default-border: #e5e7eb;
  --option-hover-bg: #f9fafb;
  --option-hover-border: #a5b4fc;
  --option-correct-bg: #f0fdf4;
  --option-correct-text: #14532d;
  --option-incorrect-bg: #fef2f2;
  --option-incorrect-text: #7f1d1d;
  --option-selected-bg: #eef2ff;
  --option-selected-text: #312e81;

  /* Challenge completed state */
  --challenge-complete-bg: #f0fdf4;
  --challenge-complete-border: #bbf7d0;

  /* Type answer input */
  --input-correct-bg: #f0fdf4;
  --input-correct-border: #22c55e;
  --input-incorrect-bg: #fef2f2;
  --input-incorrect-border: #ef4444;
  --input-default-border: #d1d5db;

  /* Explanation / back content boxes */
  --explanation-bg: #eef2ff;
  --explanation-border: #c7d2fe;
  --explanation-text: #3730a3;
}

/* --- NIGHT MODE --- */
.theme-night {
  /* Backgrounds */
  --bg-primary: #0f1117;
  --bg-secondary: #1a1d27;
  --bg-tertiary: #252833;
  --bg-surface: #1e2130;
  --bg-surface-hover: #252833;
  --bg-elevated: #252833;

  /* Text */
  --text-primary: #f3f4f6;
  --text-secondary: #d1d5db;
  --text-tertiary: #9ca3af;
  --text-muted: #6b7280;
  --text-inverse: #111827;

  /* Borders */
  --border-primary: #2d3140;
  --border-secondary: #374151;
  --border-subtle: #1f2937;

  /* Shadows (subtler in dark mode) */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -4px rgba(0, 0, 0, 0.4);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 8px 10px -6px rgba(0, 0, 0, 0.4);

  /* Overlay */
  --overlay-bg: rgba(0, 0, 0, 0.7);
  --overlay-backdrop: blur(8px);

  /* Inputs */
  --input-bg: #1a1d27;
  --input-border: #374151;
  --input-focus-ring: var(--color-accent);

  /* Scrollbar */
  --scrollbar-track: transparent;
  --scrollbar-thumb: #374151;
  --scrollbar-thumb-hover: #4b5563;

  /* Sidebar */
  --sidebar-bg: #1a1d27;
  --sidebar-border: #2d3140;
  --sidebar-item-active-bg: #252833;
  --sidebar-item-hover-bg: #252833;

  /* Cards / Tiles */
  --card-bg: #1e2130;
  --card-border: #2d3140;
  --card-hover-shadow: var(--shadow-lg);

  /* Dashboard gradients */
  --dashboard-bg: linear-gradient(to bottom right, #0f1117, #151822, #13111f);
  --dashboard-stat-bg: linear-gradient(to bottom right, #1a1d27, #1e2130);

  /* Specific component tokens */
  --completion-modal-bg: #1e2130;
  --completion-modal-perfect-bg: linear-gradient(to bottom right, #1e2130, #252833, #1e2130);
  --completion-modal-perfect-border: #854d0e;
  --completion-modal-perfect-banner-bg: linear-gradient(
    to right,
    rgba(161, 98, 7, 0.15),
    rgba(202, 138, 4, 0.15)
  );
  --completion-modal-perfect-banner-border: rgba(202, 138, 4, 0.3);
  --completion-modal-perfect-text: #fde68a;
  --completion-modal-xp-text: #fbbf24;
  --completion-modal-xp-label: #fcd34d;
  --tag-bar-bg: #252833;

  /* Study card faces */
  --study-card-front-bg: #1e2130;
  --study-card-back-bg: linear-gradient(to bottom right, #1a1d27, #252833);
  --study-card-footer-bg: rgba(30, 33, 48, 0.95);
  --study-card-back-footer-bg: rgba(37, 40, 51, 0.95);
  --study-card-back-footer-border: #374151;

  /* Quiz/option feedback */
  --option-default-border: #374151;
  --option-hover-bg: #252833;
  --option-hover-border: var(--color-accent, #6366f1);
  --option-correct-bg: rgba(34, 197, 94, 0.12);
  --option-correct-text: #86efac;
  --option-incorrect-bg: rgba(239, 68, 68, 0.12);
  --option-incorrect-text: #fca5a5;
  --option-selected-bg: var(--color-accent-subtle, rgba(124, 58, 237, 0.08));
  --option-selected-text: var(--color-accent-text, #a78bfa);

  /* Challenge completed state */
  --challenge-complete-bg: rgba(34, 197, 94, 0.1);
  --challenge-complete-border: rgba(34, 197, 94, 0.25);

  /* Type answer input */
  --input-correct-bg: rgba(34, 197, 94, 0.1);
  --input-correct-border: #22c55e;
  --input-incorrect-bg: rgba(239, 68, 68, 0.1);
  --input-incorrect-border: #ef4444;
  --input-default-border: #4b5563;

  /* Explanation / back content boxes */
  --explanation-bg: rgba(99, 102, 241, 0.1);
  --explanation-border: rgba(99, 102, 241, 0.25);
  --explanation-text: #a5b4fc;
}

/* ============================================
   LAYER 2: ACCENT THEMES
   Controls: primary action colors, progress bars, highlights
   Each accent defines exactly 4 variables for easy extension.
   ============================================ */

/* --- VIOLET (default) --- */
.accent-violet {
  --color-accent: #7c3aed;
  --color-accent-hover: #6d28d9;
  --color-accent-light: #ede9fe;
  --color-accent-gradient: linear-gradient(to right, #7c3aed, #6366f1);
  --color-accent-text: #7c3aed;
  --color-accent-subtle: rgba(124, 58, 237, 0.1);
  --color-accent-ring: rgba(124, 58, 237, 0.5);
}

.theme-night .accent-violet,
.theme-night.accent-violet {
  --color-accent-light: rgba(124, 58, 237, 0.15);
  --color-accent-subtle: rgba(124, 58, 237, 0.08);
  --color-accent-text: #a78bfa;
}

/* --- GOLD (future-ready) --- */
.accent-gold {
  --color-accent: #d97706;
  --color-accent-hover: #b45309;
  --color-accent-light: #fef3c7;
  --color-accent-gradient: linear-gradient(to right, #d97706, #f59e0b);
  --color-accent-text: #d97706;
  --color-accent-subtle: rgba(217, 119, 6, 0.1);
  --color-accent-ring: rgba(217, 119, 6, 0.5);
}

.theme-night .accent-gold,
.theme-night.accent-gold {
  --color-accent-light: rgba(217, 119, 6, 0.15);
  --color-accent-subtle: rgba(217, 119, 6, 0.08);
  --color-accent-text: #fbbf24;
}

/* --- SILVER (future-ready) --- */
.accent-silver {
  --color-accent: #6b7280;
  --color-accent-hover: #4b5563;
  --color-accent-light: #f3f4f6;
  --color-accent-gradient: linear-gradient(to right, #6b7280, #9ca3af);
  --color-accent-text: #6b7280;
  --color-accent-subtle: rgba(107, 114, 128, 0.1);
  --color-accent-ring: rgba(107, 114, 128, 0.5);
}

.theme-night .accent-silver,
.theme-night.accent-silver {
  --color-accent-light: rgba(107, 114, 128, 0.15);
  --color-accent-subtle: rgba(107, 114, 128, 0.08);
  --color-accent-text: #d1d5db;
}

/* --- EMERALD (future-ready) --- */
.accent-emerald {
  --color-accent: #059669;
  --color-accent-hover: #047857;
  --color-accent-light: #d1fae5;
  --color-accent-gradient: linear-gradient(to right, #059669, #10b981);
  --color-accent-text: #059669;
  --color-accent-subtle: rgba(5, 150, 105, 0.1);
  --color-accent-ring: rgba(5, 150, 105, 0.5);
}

.theme-night .accent-emerald,
.theme-night.accent-emerald {
  --color-accent-light: rgba(5, 150, 105, 0.15);
  --color-accent-subtle: rgba(5, 150, 105, 0.08);
  --color-accent-text: #34d399;
}

/* --- ROSE (future-ready) --- */
.accent-rose {
  --color-accent: #e11d48;
  --color-accent-hover: #be123c;
  --color-accent-light: #ffe4e6;
  --color-accent-gradient: linear-gradient(to right, #e11d48, #f43f5e);
  --color-accent-text: #e11d48;
  --color-accent-subtle: rgba(225, 29, 72, 0.1);
  --color-accent-ring: rgba(225, 29, 72, 0.5);
}

.theme-night .accent-rose,
.theme-night.accent-rose {
  --color-accent-light: rgba(225, 29, 72, 0.15);
  --color-accent-subtle: rgba(225, 29, 72, 0.08);
  --color-accent-text: #fb7185;
}

/* ============================================
   UTILITY CLASSES
   Semantic classes that map to CSS variables
   for use across components
   ============================================ */

/* Background utilities */
.bg-themed-primary {
  background-color: var(--bg-primary);
}
.bg-themed-secondary {
  background-color: var(--bg-secondary);
}
.bg-themed-surface {
  background-color: var(--bg-surface);
}
.bg-themed-elevated {
  background-color: var(--bg-elevated);
}

/* Text utilities */
.text-themed-primary {
  color: var(--text-primary);
}
.text-themed-secondary {
  color: var(--text-secondary);
}
.text-themed-tertiary {
  color: var(--text-tertiary);
}
.text-themed-muted {
  color: var(--text-muted);
}

/* Border utilities */
.border-themed {
  border-color: var(--border-primary);
}
.border-themed-secondary {
  border-color: var(--border-secondary);
}

/* Accent utilities */
.bg-accent {
  background-color: var(--color-accent);
}
.bg-accent-light {
  background-color: var(--color-accent-light);
}
.text-accent {
  color: var(--color-accent-text);
}
.border-accent {
  border-color: var(--color-accent);
}

/* Transition for smooth theme switching */
.theme-transition,
.theme-transition *,
.theme-transition *::before,
.theme-transition *::after {
  transition:
    background-color 0.3s ease,
    color 0.2s ease,
    border-color 0.3s ease,
    box-shadow 0.3s ease !important;
}
